{
 "Resources": {
  "OurJourneyUserPoolE1EB8C0A": {
   "Type": "AWS::Cognito::UserPool",
   "Properties": {
    "AccountRecoverySetting": {
     "RecoveryMechanisms": [
      {
       "Name": "verified_email",
       "Priority": 1
      }
     ]
    },
    "AdminCreateUserConfig": {
     "AllowAdminCreateUserOnly": false
    },
    "AutoVerifiedAttributes": [
     "email"
    ],
    "DeviceConfiguration": {
     "ChallengeRequiredOnNewDevice": false,
     "DeviceOnlyRememberedOnUserPrompt": true
    },
    "EmailConfiguration": {
     "EmailSendingAccount": "COGNITO_DEFAULT",
     "ReplyToEmailAddress": "noreply@verification.com"
    },
    "EmailVerificationMessage": "The verification code to your new account is {####}",
    "EmailVerificationSubject": "Verify your new account",
    "LambdaConfig": {
     "PostConfirmation": {
      "Fn::GetAtt": [
       "PostConfirmationLambdaC4F60401",
       "Arn"
      ]
     }
    },
    "MfaConfiguration": "OFF",
    "Policies": {
     "PasswordPolicy": {
      "MinimumLength": 8,
      "RequireLowercase": true,
      "RequireNumbers": true,
      "RequireSymbols": false,
      "RequireUppercase": true
     }
    },
    "Schema": [
     {
      "Mutable": true,
      "Name": "email",
      "Required": true
     },
     {
      "AttributeDataType": "String",
      "Mutable": true,
      "Name": "role",
      "StringAttributeConstraints": {
       "MaxLength": "20",
       "MinLength": "1"
      }
     }
    ],
    "SmsVerificationMessage": "The verification code to your new account is {####}",
    "UserPoolAddOns": {
     "AdvancedSecurityMode": "ENFORCED"
    },
    "UserPoolName": "our-journey-user-pool-8f97efa8",
    "UsernameAttributes": [
     "email"
    ],
    "VerificationMessageTemplate": {
     "DefaultEmailOption": "CONFIRM_WITH_CODE",
     "EmailMessage": "The verification code to your new account is {####}",
     "EmailSubject": "Verify your new account",
     "SmsMessage": "The verification code to your new account is {####}"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/OurJourneyUserPool/Resource"
   }
  },
  "OurJourneyUserPoolOurJourneyCognitoDomainA567F322": {
   "Type": "AWS::Cognito::UserPoolDomain",
   "Properties": {
    "Domain": "our-journey-app-8f97efa8",
    "UserPoolId": {
     "Ref": "OurJourneyUserPoolE1EB8C0A"
    }
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/OurJourneyUserPool/OurJourneyCognitoDomain/Resource"
   }
  },
  "UsersGroup": {
   "Type": "AWS::Cognito::UserPoolGroup",
   "Properties": {
    "Description": "Regular users with access to main application",
    "GroupName": "Users",
    "Precedence": 2,
    "UserPoolId": {
     "Ref": "OurJourneyUserPoolE1EB8C0A"
    }
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/UsersGroup"
   }
  },
  "AdminsGroup": {
   "Type": "AWS::Cognito::UserPoolGroup",
   "Properties": {
    "Description": "Administrators with access to admin panel",
    "GroupName": "Admins",
    "Precedence": 1,
    "UserPoolId": {
     "Ref": "OurJourneyUserPoolE1EB8C0A"
    }
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AdminsGroup"
   }
  },
  "PostConfirmationLambdaRoleA397FD73": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Execution role for Post-Confirmation Lambda",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "RoleName": "our-journey-post-confirmation-role-8f97efa8"
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/PostConfirmationLambdaRole/Resource"
   }
  },
  "PostConfirmationLambdaRoleDefaultPolicy7D88EC12": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminAddUserToGroup",
        "cognito-idp:GetGroup",
        "cognito-idp:ListGroups"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PostConfirmationLambdaRoleDefaultPolicy7D88EC12",
    "Roles": [
     {
      "Ref": "PostConfirmationLambdaRoleA397FD73"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/PostConfirmationLambdaRole/DefaultPolicy/Resource"
   }
  },
  "PostConfirmationLambdaC4F60401": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "95d4b8c86f08f2550bd9d32df602e67d627d5cdf2b1bc1102193859171bc6ca0.zip"
    },
    "Description": "Automatically assigns new users to the Users group",
    "Environment": {
     "Variables": {
      "DEFAULT_GROUP": "Users"
     }
    },
    "FunctionName": "our-journey-post-confirmation-8f97efa8",
    "Handler": "post_confirmation_lambda.lambda_handler",
    "Role": {
     "Fn::GetAtt": [
      "PostConfirmationLambdaRoleA397FD73",
      "Arn"
     ]
    },
    "Runtime": "python3.12",
    "Timeout": 10
   },
   "DependsOn": [
    "PostConfirmationLambdaRoleDefaultPolicy7D88EC12",
    "PostConfirmationLambdaRoleA397FD73"
   ],
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/PostConfirmationLambda/Resource",
    "aws:asset:path": "asset.95d4b8c86f08f2550bd9d32df602e67d627d5cdf2b1bc1102193859171bc6ca0",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "PostConfirmationLambdaLogGroupEBF6194F": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "PostConfirmationLambdaC4F60401"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/PostConfirmationLambda/LogGroup/Resource"
   }
  },
  "PostConfirmationLambdaCognitoInvokePermission9A1D1C8B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PostConfirmationLambdaC4F60401",
      "Arn"
     ]
    },
    "Principal": "cognito-idp.amazonaws.com"
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/PostConfirmationLambda/CognitoInvokePermission"
   }
  },
  "AdminCreatorLambdaRoleA61C0CF1": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Role for creating default admin user",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "RoleName": "our-journey-admin-creator-role-8f97efa8"
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AdminCreatorLambdaRole/Resource"
   }
  },
  "AdminCreatorLambdaRoleDefaultPolicyE1365B66": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cognito-idp:AdminAddUserToGroup",
        "cognito-idp:AdminCreateUser",
        "cognito-idp:AdminDeleteUser",
        "cognito-idp:AdminGetUser",
        "cognito-idp:AdminSetUserPassword"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AdminCreatorLambdaRoleDefaultPolicyE1365B66",
    "Roles": [
     {
      "Ref": "AdminCreatorLambdaRoleA61C0CF1"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AdminCreatorLambdaRole/DefaultPolicy/Resource"
   }
  },
  "AdminCreatorLambdaF892501F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "c5bfbe70e9a927367df2a07a707e5d8ee2bcc77cfc385f5e5e03d90788b4e53c.zip"
    },
    "Description": "Creates default admin user on stack creation",
    "FunctionName": "our-journey-admin-creator-8f97efa8",
    "Handler": "create_admin_user_lambda.lambda_handler",
    "Role": {
     "Fn::GetAtt": [
      "AdminCreatorLambdaRoleA61C0CF1",
      "Arn"
     ]
    },
    "Runtime": "python3.12",
    "Timeout": 30
   },
   "DependsOn": [
    "AdminCreatorLambdaRoleDefaultPolicyE1365B66",
    "AdminCreatorLambdaRoleA61C0CF1"
   ],
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AdminCreatorLambda/Resource",
    "aws:asset:path": "asset.c5bfbe70e9a927367df2a07a707e5d8ee2bcc77cfc385f5e5e03d90788b4e53c",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "AdminCreatorLambdaLogGroupEDD982F7": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "AdminCreatorLambdaF892501F"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AdminCreatorLambda/LogGroup/Resource"
   }
  },
  "AdminCreatorProviderframeworkonEventServiceRole081249C3": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AdminCreatorProvider/framework-onEvent/ServiceRole/Resource"
   }
  },
  "AdminCreatorProviderframeworkonEventServiceRoleDefaultPolicy47879F25": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AdminCreatorLambdaF892501F",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AdminCreatorLambdaF892501F",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:GetFunction",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "AdminCreatorLambdaF892501F",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AdminCreatorProviderframeworkonEventServiceRoleDefaultPolicy47879F25",
    "Roles": [
     {
      "Ref": "AdminCreatorProviderframeworkonEventServiceRole081249C3"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AdminCreatorProvider/framework-onEvent/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AdminCreatorProviderframeworkonEventF53C7363": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "07a90cc3efdfc34da22208dcd9d211f06f5b0e01b21e778edc7c3966b1f61d57.zip"
    },
    "Description": "AWS CDK resource provider framework - onEvent (OurJourneyFrontendStack/AdminCreatorProvider)",
    "Environment": {
     "Variables": {
      "USER_ON_EVENT_FUNCTION_ARN": {
       "Fn::GetAtt": [
        "AdminCreatorLambdaF892501F",
        "Arn"
       ]
      }
     }
    },
    "Handler": "framework.onEvent",
    "LoggingConfig": {
     "ApplicationLogLevel": "FATAL",
     "LogFormat": "JSON"
    },
    "Role": {
     "Fn::GetAtt": [
      "AdminCreatorProviderframeworkonEventServiceRole081249C3",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x",
    "Timeout": 900
   },
   "DependsOn": [
    "AdminCreatorProviderframeworkonEventServiceRoleDefaultPolicy47879F25",
    "AdminCreatorProviderframeworkonEventServiceRole081249C3"
   ],
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AdminCreatorProvider/framework-onEvent/Resource",
    "aws:asset:path": "asset.07a90cc3efdfc34da22208dcd9d211f06f5b0e01b21e778edc7c3966b1f61d57",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "AdminCreatorProviderframeworkonEventLogGroupABFE1112": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "AdminCreatorProviderframeworkonEventF53C7363"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AdminCreatorProvider/framework-onEvent/LogGroup/Resource"
   }
  },
  "DefaultAdminUser": {
   "Type": "AWS::CloudFormation::CustomResource",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "AdminCreatorProviderframeworkonEventF53C7363",
      "Arn"
     ]
    },
    "UserPoolId": {
     "Ref": "OurJourneyUserPoolE1EB8C0A"
    },
    "AdminEmail": "admin@ourjourney.local",
    "AdminPassword": "AdminPassword123!",
    "AdminGroup": "Admins"
   },
   "DependsOn": [
    "AdminsGroup",
    "UsersGroup"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/DefaultAdminUser/Default"
   }
  },
  "OurJourneyAppClient2CE7F09C": {
   "Type": "AWS::Cognito::UserPoolClient",
   "Properties": {
    "AccessTokenValidity": 60,
    "AllowedOAuthFlows": [
     "code"
    ],
    "AllowedOAuthFlowsUserPoolClient": true,
    "AllowedOAuthScopes": [
     "openid",
     "email",
     "profile"
    ],
    "CallbackURLs": [
     "http://localhost:5173",
     "https://example.com"
    ],
    "ClientName": "our-journey-app-client-8f97efa8",
    "EnableTokenRevocation": true,
    "ExplicitAuthFlows": [
     "ALLOW_USER_PASSWORD_AUTH",
     "ALLOW_ADMIN_USER_PASSWORD_AUTH",
     "ALLOW_USER_SRP_AUTH",
     "ALLOW_REFRESH_TOKEN_AUTH"
    ],
    "GenerateSecret": false,
    "IdTokenValidity": 60,
    "LogoutURLs": [
     "http://localhost:5173",
     "https://example.com"
    ],
    "PreventUserExistenceErrors": "ENABLED",
    "ReadAttributes": [
     "custom:role",
     "email",
     "email_verified"
    ],
    "RefreshTokenValidity": 43200,
    "SupportedIdentityProviders": [
     "COGNITO"
    ],
    "TokenValidityUnits": {
     "AccessToken": "minutes",
     "IdToken": "minutes",
     "RefreshToken": "minutes"
    },
    "UserPoolId": {
     "Ref": "OurJourneyUserPoolE1EB8C0A"
    },
    "WriteAttributes": [
     "email"
    ]
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/OurJourneyAppClient/Resource"
   }
  },
  "FrontendStoreBucketC891F5ED": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "BucketName": "our-journey-frontend-store-8f97efa8",
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "aws-cdk:auto-delete-objects",
      "Value": "true"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/FrontendStoreBucket/Resource"
   }
  },
  "FrontendStoreBucketPolicyF91602F7": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "FrontendStoreBucketC891F5ED"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "FrontendStoreBucketC891F5ED",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "FrontendStoreBucketC891F5ED",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:PutBucketPolicy"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::GetAtt": [
          "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
          "Arn"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "FrontendStoreBucketC891F5ED",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "FrontendStoreBucketC891F5ED",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "s3:ListBucket",
       "Condition": {
        "StringEquals": {
         "aws:SourceAccount": {
          "Ref": "AWS::AccountId"
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "amplify.amazonaws.com"
       },
       "Resource": {
        "Fn::GetAtt": [
         "FrontendStoreBucketC891F5ED",
         "Arn"
        ]
       },
       "Sid": "AllowAmplifyToListBucket"
      },
      {
       "Action": "s3:GetObject",
       "Condition": {
        "StringEquals": {
         "aws:SourceAccount": {
          "Ref": "AWS::AccountId"
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "amplify.amazonaws.com"
       },
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "FrontendStoreBucketC891F5ED",
            "Arn"
           ]
          },
          "/*"
         ]
        ]
       },
       "Sid": "AllowAmplifyToGetObjects"
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/FrontendStoreBucket/Policy/Resource"
   }
  },
  "FrontendStoreBucketAutoDeleteObjectsCustomResourceFEE08134": {
   "Type": "Custom::S3AutoDeleteObjects",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "FrontendStoreBucketC891F5ED"
    }
   },
   "DependsOn": [
    "FrontendStoreBucketPolicyF91602F7"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/FrontendStoreBucket/AutoDeleteObjectsCustomResource/Default"
   }
  },
  "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Version": "2012-10-17",
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ]
    },
    "ManagedPolicyArns": [
     {
      "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role"
   }
  },
  "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "faa95a81ae7d7373f3e1f242268f904eb748d8d0fdd306e8a6fe515a1905a7d6.zip"
    },
    "Timeout": 900,
    "MemorySize": 128,
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x",
    "Description": {
     "Fn::Join": [
      "",
      [
       "Lambda function for auto-deleting objects in ",
       {
        "Ref": "FrontendStoreBucketC891F5ED"
       },
       " S3 bucket."
      ]
     ]
    }
   },
   "DependsOn": [
    "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092"
   ],
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler",
    "aws:asset:path": "asset.faa95a81ae7d7373f3e1f242268f904eb748d8d0fdd306e8a6fe515a1905a7d6",
    "aws:asset:property": "Code"
   }
  },
  "CopyBuildZip9F0F37C7": {
   "Type": "Custom::AWS",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "AWS679f53fac002430cb0da5b7982bd22872D164C4C",
      "Arn"
     ]
    },
    "Create": {
     "Fn::Join": [
      "",
      [
       "{\"action\":\"copyObject\",\"service\":\"S3\",\"parameters\":{\"CopySource\":\"",
       {
        "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
       },
       "/669f95a0727d9f622caa54ec74adefaef89ce9c7587a7880c6c73e486d197a8f.zip\",\"Bucket\":\"",
       {
        "Ref": "FrontendStoreBucketC891F5ED"
       },
       "\",\"Key\":\"build.zip\"},\"physicalResourceId\":{\"id\":\"build-zip-copy\"}}"
      ]
     ]
    },
    "Delete": {
     "Fn::Join": [
      "",
      [
       "{\"action\":\"deleteObject\",\"service\":\"S3\",\"parameters\":{\"Bucket\":\"",
       {
        "Ref": "FrontendStoreBucketC891F5ED"
       },
       "\",\"Key\":\"build.zip\"}}"
      ]
     ]
    },
    "InstallLatestAwsSdk": false
   },
   "DependsOn": [
    "CopyBuildZipCustomResourcePolicyF02AF8E5"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/CopyBuildZip/Resource/Default"
   }
  },
  "CopyBuildZipCustomResourcePolicyF02AF8E5": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:GetObject",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":s3:::",
          {
           "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
          },
          "/669f95a0727d9f622caa54ec74adefaef89ce9c7587a7880c6c73e486d197a8f.zip"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:DeleteObject",
        "s3:PutObject"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "FrontendStoreBucketC891F5ED",
            "Arn"
           ]
          },
          "/build.zip"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CopyBuildZipCustomResourcePolicyF02AF8E5",
    "Roles": [
     {
      "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/CopyBuildZip/CustomResourcePolicy/Resource"
   }
  },
  "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource"
   }
  },
  "AWS679f53fac002430cb0da5b7982bd22872D164C4C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "a38f8a5114ae969de815d5c66b3ddbd646445697a789f7b16424b4ea541d4ff9.zip"
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x",
    "Timeout": 120
   },
   "DependsOn": [
    "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"
   ],
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AWS679f53fac002430cb0da5b7982bd2287/Resource",
    "aws:asset:path": "asset.a38f8a5114ae969de815d5c66b3ddbd646445697a789f7b16424b4ea541d4ff9",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "AWS679f53fac002430cb0da5b7982bd2287LogGroup449FB7C2": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "AWS679f53fac002430cb0da5b7982bd22872D164C4C"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AWS679f53fac002430cb0da5b7982bd2287/LogGroup/Resource"
   }
  },
  "AmplifyDeploymentLambdaRole9C288AF0": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Execution role for Our Journey Amplify deployment Lambda",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "RoleName": "our-journey-amplify-lambda-role-8f97efa8"
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AmplifyDeploymentLambdaRole/Resource"
   }
  },
  "AmplifyDeploymentLambdaRoleDefaultPolicy070A4572": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:DeleteObject",
        "s3:GetObject",
        "s3:ListBucket",
        "s3:PutObject"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "FrontendStoreBucketC891F5ED",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "FrontendStoreBucketC891F5ED",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ],
       "Sid": "S3BucketAccess"
      },
      {
       "Action": [
        "amplify:CreateApp",
        "amplify:CreateBranch",
        "amplify:DeleteApp",
        "amplify:DeleteBranch",
        "amplify:GetApp",
        "amplify:GetBranch",
        "amplify:ListApps",
        "amplify:ListBranches",
        "amplify:StartDeployment",
        "amplify:UpdateApp",
        "amplify:UpdateBranch"
       ],
       "Effect": "Allow",
       "Resource": "*",
       "Sid": "AmplifyAccess"
      },
      {
       "Action": [
        "cognito-idp:DescribeUserPoolClient",
        "cognito-idp:UpdateUserPoolClient"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "OurJourneyUserPoolE1EB8C0A",
         "Arn"
        ]
       },
       "Sid": "CognitoAccess"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AmplifyDeploymentLambdaRoleDefaultPolicy070A4572",
    "Roles": [
     {
      "Ref": "AmplifyDeploymentLambdaRole9C288AF0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AmplifyDeploymentLambdaRole/DefaultPolicy/Resource"
   }
  },
  "AmplifyDeploymentLambda5197F66A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "fe63d112d699f43d79930413ff862d474b59b419da495e0952f2420cf311206f.zip"
    },
    "Description": "Lambda function to manage Amplify app deployment with Cognito integration for Our Journey",
    "Environment": {
     "Variables": {
      "FRONTEND_BUCKET_NAME": {
       "Ref": "FrontendStoreBucketC891F5ED"
      },
      "FRONTEND_FOLDER_NAME": "build/",
      "AMPLIFY_APP_NAME": "OurJourneyApp-8f97efa8",
      "USER_POOL_ID": {
       "Ref": "OurJourneyUserPoolE1EB8C0A"
      },
      "USER_POOL_CLIENT_ID": {
       "Ref": "OurJourneyAppClient2CE7F09C"
      },
      "USER_POOL_DOMAIN": {
       "Fn::Join": [
        "",
        [
         {
          "Ref": "OurJourneyUserPoolOurJourneyCognitoDomainA567F322"
         },
         ".auth.",
         {
          "Ref": "AWS::Region"
         },
         ".amazoncognito.com"
        ]
       ]
      },
      "COGNITO_REGION": {
       "Ref": "AWS::Region"
      }
     }
    },
    "FunctionName": "our-journey-amplify-deployment-8f97efa8",
    "Handler": "lambda_function.lambda_handler",
    "Role": {
     "Fn::GetAtt": [
      "AmplifyDeploymentLambdaRole9C288AF0",
      "Arn"
     ]
    },
    "Runtime": "python3.13",
    "Timeout": 90
   },
   "DependsOn": [
    "AmplifyDeploymentLambdaRoleDefaultPolicy070A4572",
    "AmplifyDeploymentLambdaRole9C288AF0"
   ],
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AmplifyDeploymentLambda/Resource",
    "aws:asset:path": "asset.fe63d112d699f43d79930413ff862d474b59b419da495e0952f2420cf311206f",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "AmplifyDeploymentLambdaLogGroup405FE173": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "AmplifyDeploymentLambda5197F66A"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AmplifyDeploymentLambda/LogGroup/Resource"
   }
  },
  "AmplifyDeploymentProviderframeworkonEventServiceRole85B3B19A": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AmplifyDeploymentProvider/framework-onEvent/ServiceRole/Resource"
   }
  },
  "AmplifyDeploymentProviderframeworkonEventServiceRoleDefaultPolicy3033A034": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AmplifyDeploymentLambda5197F66A",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AmplifyDeploymentLambda5197F66A",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:GetFunction",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "AmplifyDeploymentLambda5197F66A",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AmplifyDeploymentProviderframeworkonEventServiceRoleDefaultPolicy3033A034",
    "Roles": [
     {
      "Ref": "AmplifyDeploymentProviderframeworkonEventServiceRole85B3B19A"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AmplifyDeploymentProvider/framework-onEvent/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AmplifyDeploymentProviderframeworkonEventFE073406": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "07a90cc3efdfc34da22208dcd9d211f06f5b0e01b21e778edc7c3966b1f61d57.zip"
    },
    "Description": "AWS CDK resource provider framework - onEvent (OurJourneyFrontendStack/AmplifyDeploymentProvider)",
    "Environment": {
     "Variables": {
      "USER_ON_EVENT_FUNCTION_ARN": {
       "Fn::GetAtt": [
        "AmplifyDeploymentLambda5197F66A",
        "Arn"
       ]
      }
     }
    },
    "Handler": "framework.onEvent",
    "LoggingConfig": {
     "ApplicationLogLevel": "FATAL",
     "LogFormat": "JSON"
    },
    "Role": {
     "Fn::GetAtt": [
      "AmplifyDeploymentProviderframeworkonEventServiceRole85B3B19A",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x",
    "Timeout": 900
   },
   "DependsOn": [
    "AmplifyDeploymentProviderframeworkonEventServiceRoleDefaultPolicy3033A034",
    "AmplifyDeploymentProviderframeworkonEventServiceRole85B3B19A"
   ],
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AmplifyDeploymentProvider/framework-onEvent/Resource",
    "aws:asset:path": "asset.07a90cc3efdfc34da22208dcd9d211f06f5b0e01b21e778edc7c3966b1f61d57",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "AmplifyDeploymentProviderframeworkonEventLogGroup550AD963": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "AmplifyDeploymentProviderframeworkonEventFE073406"
       }
      ]
     ]
    },
    "RetentionInDays": 731
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AmplifyDeploymentProvider/framework-onEvent/LogGroup/Resource"
   }
  },
  "AmplifyDeploymentCustomResource": {
   "Type": "AWS::CloudFormation::CustomResource",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "AmplifyDeploymentProviderframeworkonEventFE073406",
      "Arn"
     ]
    },
    "ServiceTimeout": 90
   },
   "DependsOn": [
    "CopyBuildZipCustomResourcePolicyF02AF8E5",
    "CopyBuildZip9F0F37C7"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/AmplifyDeploymentCustomResource/Default"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/+1YS2/bOBD+LeWxYLW7CbAH31THDrpwY8NKcjGCgCbHMmuK1PJh1xX03xekRFmO3W5TIG130YNhamY4z4+DIS+Si8s/k99fkZ15Q9nmjeDLpMosoRtMduaxoiqX3KqkujOgZ0qJRYUIpcpJOweqtqD3aHCBEWFbIimwDKjT3O7fKwZogEY34+l8OLpCGBFn1T1ovtqjQYWgIFyggdUOaoyoM1YVqbWaL50FgwboNcKIwZZTuNWEbrjM/Ta6JkKAzGEOfzuugU3lDeyughwarIgwELdNpdjPoYBiCUEuBKBVUdrObOtEsFWsCBqg6XiMMCqJMTul2UwJToO7BZcTkLldt9K6MX/Fc25No68jTtQONCUGntCzfbFUwnRutuS7suyL155RqC0R0TpiYKxWe4SRAbHKeC7vypEkSwEsmjA8l+9kKjgxPntH+cXIGdCSFDFDNUbGEsmIZv2UV3Uj6at8E6TRa1Q/4OFKxuLjuLhSBeFyUXUb2ry0cGnY3g8WVjMNK/6xUXissZHsU661cmVnaCg4SNuADoy5VRuQ90Rwxu2+tUmcXY+F2oW4CSt4o6qtYcxBA7Eu+e6MiKdlujzAI+Q4mJzDVlFiuZJROAcJmljIgGqwnV7OzrmoUuehUyFKhFgSurnTIoJ81bnu7Fpp/imYGSoG15pIG+3xohSccttjxGIKlStneyoNVWV7iGqMSg1bkNYnZfSRGwuSwkhrpXvAJezk8GlYaTDrc+G4o+J0WMFop7mFE01HGDkuf6OhxpwUSTVXAnyljXEFsLfh4JWaS8pLItKm6cSaBxm/IaVNVZpYGRiqedmRMNJKwAHN2COEvSeS5NAd70WFij4l1a2+h1b+Vh1E+8To2wnXWkLX76TgEjoeeo2+gvkr9m+KvR8D98D7mrheIIQv6/2OAf5YkH1H0HyDsW/a8rxz87+Gcujg3nHckP2eTt2t8pwTK6dkxjJLLBQgrYkO/3yKPks2PdoB+M9Q8BznXj6cH5HFgKMGQjUWpFgyklRjJ8NxWFRneg3ILddKeiVxemrFe0OIDg6FpeUFKBdlaXMn8cs1kUyAjjuc9JL9Qo76lgLAY4CnXr2IDz3BMz23J/xU0bE9ofKcy3ysdEE87a9seuObT+mnyTBpTlQ+gS2I+ws0QOP0Np0028Ic3mrZlvSwytxSgu1mzfbCF8TNafhnktOr4khSvS977e9fkl9AofQ+45/OZ7dn90kEZ9z4QlBfXaWfE6L/LeYvpJ9kJXTG2AlDlwRdcGP8V8ZlLsAq2euUznEW0xD66MzpUpnoxs92avw4BZYwYkkbtb+HPpxnNQmpsbl8JMaANUnq/7C5TKq3jm7AviUGcLNchGu0ugIBFqbLD0APzzNLoehm5paC0zQ8JrTeLcPOo6r1SpVdPr5Pb9Lr8IYFcqU0hSybHK7On3ur2YL29fJvNM1FPRS1cbP1th2fqtaF3v24z6+xULlJqklbm0XVlelo7v4+xOBedKWucShGZok/e7h5ZHnUYJTTFExSzbTacgYapzszDNx5y6zx8Xcsdvw1U2bLfCIbtYbKD1dy6mzpbI1ne7tW8rfL5I+L5PLVB8P5mxZ7ybz5/wf/ZxEh8BQAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "OurJourneyFrontendStack/CDKMetadata/Default"
   },
   "Condition": "CDKMetadataAvailable"
  }
 },
 "Outputs": {
  "UserPoolId": {
   "Description": "Cognito User Pool ID",
   "Value": {
    "Ref": "OurJourneyUserPoolE1EB8C0A"
   },
   "Export": {
    "Name": "OurJourneyFrontendStack-UserPoolId"
   }
  },
  "UserPoolClientId": {
   "Description": "Cognito User Pool Client ID",
   "Value": {
    "Ref": "OurJourneyAppClient2CE7F09C"
   },
   "Export": {
    "Name": "OurJourneyFrontendStack-UserPoolClientId"
   }
  },
  "CognitoHostedUIDomain": {
   "Description": "Cognito Hosted UI Domain URL",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "OurJourneyUserPoolOurJourneyCognitoDomainA567F322"
      },
      ".auth.",
      {
       "Ref": "AWS::Region"
      },
      ".amazoncognito.com"
     ]
    ]
   },
   "Export": {
    "Name": "OurJourneyFrontendStack-CognitoHostedUIDomain"
   }
  },
  "CognitoRegion": {
   "Description": "AWS Region for Cognito",
   "Value": {
    "Ref": "AWS::Region"
   },
   "Export": {
    "Name": "OurJourneyFrontendStack-CognitoRegion"
   }
  },
  "FrontendBucketName": {
   "Description": "S3 Bucket for frontend storage",
   "Value": {
    "Ref": "FrontendStoreBucketC891F5ED"
   },
   "Export": {
    "Name": "OurJourneyFrontendStack-FrontendBucketName"
   }
  },
  "DeploymentLambdaArn": {
   "Description": "Amplify Deployment Lambda Function ARN",
   "Value": {
    "Fn::GetAtt": [
     "AmplifyDeploymentLambda5197F66A",
     "Arn"
    ]
   },
   "Export": {
    "Name": "OurJourneyFrontendStack-DeploymentLambdaArn"
   }
  },
  "UsersGroupName": {
   "Description": "Cognito User Pool Group for regular users",
   "Value": "Users"
  },
  "AdminsGroupName": {
   "Description": "Cognito User Pool Group for administrators",
   "Value": "Admins"
  },
  "PostDeploymentInstructions": {
   "Description": "Next steps after stack deployment",
   "Value": "After deployment: 1) Check Amplify console for app URL, 2) Sign in with default admin credentials, 3) Change admin password immediately"
  },
  "DefaultAdminCredentials": {
   "Description": "⚠️  Default admin credentials - CHANGE PASSWORD IMMEDIATELY after first login!",
   "Value": "Email: admin@ourjourney.local | Password: AdminPassword123!"
  }
 },
 "Conditions": {
  "CDKMetadataAvailable": {
   "Fn::Or": [
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "af-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-3"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-4"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-northwest-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-2"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "il-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "sa-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-1"
       ]
      }
     ]
    },
    {
     "Fn::Equals": [
      {
       "Ref": "AWS::Region"
      },
      "us-west-2"
     ]
    }
   ]
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}